!function(i){var r,e,l;"undefined"!=typeof GMaps&&0<i("#gmap").length&&(r=new GMaps({div:"#gmap",lat:wp_travel_drag_drop_uploader.lat,lng:wp_travel_drag_drop_uploader.lng}),e=document.getElementById("search-input"),l=new google.maps.places.Autocomplete(e),r.setCenter(wp_travel_drag_drop_uploader.lat,wp_travel_drag_drop_uploader.lng),r.setZoom(15),r.addMarker({lat:wp_travel_drag_drop_uploader.lat,lng:wp_travel_drag_drop_uploader.lng,title:wp_travel_drag_drop_uploader.loc,draggable:!0,dragend:function(e){var a=e.latLng.lat(),n=e.latLng.lng(),e=(r.setCenter(a,n),new google.maps.LatLng(a,n)),t=new google.maps.Geocoder;t.geocode({latLng:e},function(e,t){t==google.maps.GeocoderStatus.OK&&e[1]&&(i("#wp-travel-lat").val(a),i("#wp-travel-lng").val(n),i("#wp-travel-location").val(e[1].formatted_address),i("#search-input").val(e[1].formatted_address))})}}),l.bindTo("bounds",r),l.addListener("place_changed",function(){var a,n,e,t=l.getPlace();t.geometry?(r.removeMarkers(),t.geometry.viewport?r.fitBounds(t.geometry.viewport):(r.setCenter(t.geometry.location),r.setZoom(15)),a=t.geometry.location.lat(),n=t.geometry.location.lng(),e=new google.maps.LatLng(a,n),(new google.maps.Geocoder).geocode({latLng:e},function(e,t){t==google.maps.GeocoderStatus.OK&&e[1]&&(i("#wp-travel-lat").val(a),i("#wp-travel-lng").val(n),i("#wp-travel-location").val(e[1].formatted_address),i("#search-input").val(e[1].formatted_address))}),r.addMarker({lat:a,lng:n,title:t.formatted_address,draggable:!0,dragend:function(e){var a=e.latLng.lat(),n=e.latLng.lng(),e=(r.setCenter(a,n),new google.maps.LatLng(a,n)),t=new google.maps.Geocoder;t.geocode({latLng:e},function(e,t){t==google.maps.GeocoderStatus.OK&&e[1]&&(i("#wp-travel-lat").val(a),i("#wp-travel-lng").val(n),i("#wp-travel-location").val(e[1].formatted_address),i("#search-input").val(e[1].formatted_address))})}})):window.alert("Autocomplete's returned place contains no geometry")})),i.fn.tabs&&i(".wp-travel-tabs-wrap").tabs({activate:function(e,t){i(t.newPanel).css({display:"inline-block"}),i("#wp-travel-settings-current-tab").val(i(t.newPanel).attr("id")),"undefined"!=typeof GMaps&&0<i("#gmap").length&&(r.refresh(),google.maps.event.trigger(r.map,"resize"))},create:function(e,t){i(t.panel).css({display:"inline-block"}),i("#wp-travel-settings-current-tab").val(i(t.panel).attr("id"))},load:function(e,t){}}),i.fn.wpt_datepicker&&(i("#wp-travel-start-date").wpt_datepicker({language:"en",minDate:new Date,onSelect:function(e){newMinDate=null,newMaxDate=new Date,""!==e&&(milliseconds=moment(e,"YYYY-MM-DD"),new_date_min=new Date(milliseconds),newMinDate=new Date(new_date_min.setDate(new Date(new_date_min.getDate())))),i("#wp-travel-end-date").wpt_datepicker({minDate:newMinDate})}}),i("#wp-travel-end-date").wpt_datepicker({language:"en",minDate:new Date}),i(".wp-travel-datepicker").wpt_datepicker({language:"en",minDate:new Date}),i(".wp-travel-timepicker").wpt_datepicker({language:"en",timepicker:!0,onlyTimepicker:!0})),i(document).on("click","#publish",function(){var e=i("#wp-travel-start-date").val(),t=i("#wp-travel-end-date").val(),a="";if(""==e&&""==t||""==e&&(a+="Start date can't be empty!\n"),""!=a)return alert(a),!1;i(document).off("click","#publish")});function t(){var e="."+i("#wp-travel-pricing-option-type").val()+"-option-row";i(".price-option-row").addClass("hidden"),i(e).removeClass("hidden"),o(),s()}function a(){var e=i("#wp-travel-pricing-option-type").val(),t=i("#wp-travel-fixed-departure");"multiple-price"!==e&&"single-price"!==e||(t.is(":checked")?(i(".wp-travel-fixed-departure-row").removeClass("hidden"),i(".wp-travel-trip-duration-row").addClass("hidden")):(i(".wp-travel-fixed-departure-row").addClass("hidden"),i(".wp-travel-trip-duration-row").removeClass("hidden"))),i(".wp-travel-enable-multiple-dates").addClass("hidden"),"multiple-price"===e&&(t.is(":checked")?(i(".wp-travel-enable-multiple-dates, #wp-variations-multiple-dates").removeClass("hidden"),n()):i(".wp-travel-enable-multiple-dates, #wp-variations-multiple-dates").addClass("hidden"))}function n(){var e=i("#wp-travel-pricing-option-type").val(),t=i("#wp-travel-fixed-departure"),a=i("#wp-travel-enable-multiple-fixed-departure");"multiple-price"===e&&t.is(":checked")&&a.is(":checked")?(i(".wp-travel-fixed-departure-row").addClass("hidden"),i("#wp-variations-multiple-dates").removeClass("hidden")):(i(".wp-travel-fixed-departure-row").removeClass("hidden"),i("#wp-variations-multiple-dates").addClass("hidden"))}function o(){"single-price"==i("#wp-travel-pricing-option-type").val()&&i("#wp-travel-enable-sale").is(":checked")?(i("#wp-travel-sale-price").removeAttr("disabled").closest(".price-option-row").removeClass("hidden"),i("#wp-travel-price").attr("required","required"),i("#wp-travel-sale-price").attr("required","required")):(i("#wp-travel-sale-price").attr("disabled","disabled").closest(".price-option-row").addClass("hidden"),i("#wp-travel-price").removeAttr("required"),i("#wp-travel-sale-price").removeAttr("required"))}function s(){i("#wp-travel-minimum-partial-payout-percent-use-global").is(":checked")?i("#wp-travel-minimum-partial-payout-percent").closest(".price-option-row").addClass("hidden"):i("#wp-travel-minimum-partial-payout-percent").closest(".price-option-row").removeClass("hidden")}function o(){"single-price"==i("#wp-travel-pricing-option-type").val()&&i("#wp-travel-enable-sale").is(":checked")?(i("#wp-travel-sale-price").removeAttr("disabled").closest(".price-option-row").removeClass("hidden"),i("#wp-travel-price").attr("required","required"),i("#wp-travel-sale-price").attr("required","required")):(i("#wp-travel-sale-price").attr("disabled","disabled").closest(".price-option-row").addClass("hidden"),i("#wp-travel-price").removeAttr("required"),i("#wp-travel-sale-price").removeAttr("required"))}function d(){i(".custom-payout-option-row").each(function(){i(this).hasClass("global-enabled")?i(this).removeClass("hidden"):i(this).addClass("hidden")})}i(document).on("click","#wp-travel-enable-sale",function(){o()}),i(document).on("change","#wp-travel-pricing-option-type",function(){t(),a(),d()}),i(document).on("click","#wp-travel-fixed-departure",function(){a()}),i(document).on("change","#wp-travel-enable-multiple-fixed-departure",function(){n()}),t(),a(),d(),i(document).on("click",".wp-travel-clone-post",function(e){e.preventDefault();e=i(this).data("post_id"),i(this).data("security"),e={post_id:e,_nonce:_wp_travel_admin._nonce,action:"wp_travel_clone_trip"};i.ajax({url:ajaxurl,data:e,type:"post",dataType:"json",success:function(e){location.href=location.href}})}),i(document).on("change",".wp-travel-variation-pricing-name",function(){var e=i(this).val().toString().toLowerCase().replace(/\s+/g,"-").replace(/\,+/g,"-").replace(/\"+/g,"-").replace(/\'+/g,"-").replace(/\/+/g,"-").replace(/\(+/g,"-").replace(/\)+/g,"-").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");i(this).siblings(".wp-travel-variation-pricing-uniquekey").val(e)}),i(document).on("change",".wp-travel-pricing-options-list",function(){var e=i(this).data("category-id");"custom"===i(this).val()?i(".custom-pricing-label-wrap-"+e).css("display","block"):i(".custom-pricing-label-wrap-"+e).css("display","none")}),i(".wp-travel-pricing-options-list").trigger("change"),i(document).on("change",".wp-travel-enable-variation-price-sale",function(){var e=i(this).closest(".repeat-row").next(".repeat-row");i(this).is(":checked")?(e.removeClass("hidden"),e.find('input[type="number"]').attr("required","required")):(e.addClass("hidden"),e.find('input[type="number"]').removeAttr("required"))}),i(".wp-travel-enable-variation-price-sale").is(":checked")?i(this).closest(".repeat-row").next(".repeat-row").removeClass("hidden"):i(this).closest(".repeat-row").next(".repeat-row").addClass("hidden"),i(document).on("change",".wp-travel-enable-variation-price-sale-new",function(){var e=i(this).closest(".repeat-row").next(".repeat-row");i(this).is(":checked")?(e.removeClass("visibility-hidden"),e.find('input[type="number"]').attr("required","required")):(e.addClass("visibility-hidden"),e.find('input[type="number"]').removeAttr("required"))}),i(".wp-travel-enable-variation-price-sale-new").is(":checked")?i(this).closest(".repeat-row").next(".repeat-row").removeClass("visibility-hidden"):i(this).closest(".repeat-row").next(".repeat-row").addClass("visibility-hidden"),i("#wp-travel-enable-sale").is(":checked")&&(i("#wp-travel-price").attr("required","required"),i("#wp-travel-sale-price").attr("required","required")),i(document).on("click",".wp-travel-featured-post",function(e){e.preventDefault();var t=i(this),e=i(this).attr("data-post-id"),a=i(this).attr("data-nonce");i.ajax({url:ajaxurl,data:{action:"wp_travel_featured_post",post_id:e,nonce:a},type:"post",dataType:"json",success:function(e){"invalid"!=e&&(t.removeClass("dashicons-star-filled").removeClass("dashicons-star-empty"),"yes"==e.new_status?t.addClass("dashicons-star-filled"):t.addClass("dashicons-star-empty"))}})}),i("#add_itinerary_row").click(function(e){e.preventDefault();var e=wp.template("wp-travel-itinerary-items"),t=Math.floor(990*Math.random())+10;i(".itinerary_block").append(e({random:t})),i(".itinerary_block .panel:last .wp-travel-datepicker").wpt_datepicker({language:"en",minDate:new Date}),i(".itinerary_block .panel:last .wp-travel-timepicker").wpt_datepicker({language:"en",timepicker:!0,onlyTimepicker:!0}),i(".while-empty").addClass("hidden"),i(".wp-collapse-open").removeClass("hidden")}),i(document).on("click",".remove_itinery",function(e){return e.preventDefault(),i(this).closest(".itinerary_wrap").remove(),!1}),i(".tab-accordion .wp-travel-sorting-tabs, #tab-accordion .wp-travel-sorting-tabs, #tab-accordion-itineraries #accordion-itinerary-data").sortable({handle:".wp-travel-sorting-handle"}),i("#wp-travel-tab-content-setting .wp-travel-sorting-tabs tbody").sortable({handle:".wp-travel-sorting-handle"}),i.ui.accordion.prototype._originalKeyDown=i.ui.accordion.prototype._keydown,i.ui.accordion.prototype._keydown=function(e){var t=i.ui.keyCode;e.keyCode!=t.SPACE&&this._originalKeyDown(e)},i(".ui-accordion-header").click(function(){i(".open-all-link").removeClass("hidden"),i(".close-all-link").removeClass("hidden")}),i(document).on("click",".wt-accordion-close",function(e){var t=i(this).closest(".tab-accordion").attr("id");1==confirm("Are you sure you want to delete?")&&(i(this).closest("div.panel-default").remove(),(0<i("#"+t+" .panel-default:visible").length?(i(".while-empty").addClass("hidden").hide(),i(".wp-collapse-open")):(i(".wp-collapse-open").addClass("hidden").hide(),i(".while-empty"))).removeClass("hidden").show())}),i(".wp-travel-faq-add-new").on("click",function(){var e=wp.template("wp-travel-faq"),t=(i("#accordion-faq-data panel-default").length,Math.floor(990*Math.random())+10);i("#accordion-faq-data").append(e({random:t})),i(".while-empty").addClass("hidden"),i(".wp-collapse-open").removeClass("hidden")}),i(".wp-travel-pricing-add-new").on("click",function(){var e=wp.template("wp-travel-pricing-options"),t=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),a=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);i("#pricing-options-data").append(e({random:t,category_id:a}))}),i(".wp-travel-trip-facts-add-new").on("click",function(){var e=wp.template("wp-travel-trip-facts-options"),t=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);i("#accordion-fact-data").append(e({random:t}))}),i("#date-options-data .panel .wp-travel-multiple-start-date").each(function(){var t=i(this),e=i(this).val();newMinDate=new Date,""!==e&&(milliseconds=moment(e,"YYYY-MM-DD"),new_date_min=new Date(milliseconds),newMinDate=new Date(new_date_min.setDate(new Date(new_date_min.getDate()))),i(this).siblings(".wp-travel-multiple-end-date").wpt_datepicker({minDate:newMinDate})),i(this).wpt_datepicker({language:"en",minDate:new Date,onSelect:function(e){newMinDate=null,newMaxDate=new Date,""!==e&&(milliseconds=moment(e,"YYYY-MM-DD"),new_date_min=new Date(milliseconds),newMinDate=new Date(new_date_min.setDate(new Date(new_date_min.getDate())))),t.siblings(".wp-travel-multiple-end-date").wpt_datepicker({minDate:newMinDate})}})}),i(".wp-travel-multiple-dates-add-new").on("click",function(){var e=wp.template("wp-travel-multiple-dates"),t=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);i("#date-options-data").append(e({random:t})),i("#date-options-data .panel:last .wp-travel-multiple-start-date").wpt_datepicker({language:"en",minDate:new Date,onSelect:function(e){newMinDate=null,newMaxDate=new Date,""!==e&&(milliseconds=moment(e,"YYYY-MM-DD"),new_date_min=new Date(milliseconds),newMinDate=new Date(new_date_min.setDate(new Date(new_date_min.getDate())))),i("#date-options-data .panel:last .wp-travel-multiple-end-date").wpt_datepicker({minDate:newMinDate})}})}),i(document).on("change keyup","*[bind]",function(e){var t=i(this).attr("bind"),a=""!=i(this).val()?i(this).val():"Untitled";i("*[bind='"+t+"']").html(a),i("*[bind='"+t+"']").val(i(this).val())}),i(document).on("change keyup","*[bindPrice]",function(e){var t=i(this).attr("bindPrice"),a=""!=i(this).val()?i(this).val():1;i("*[bindSale='"+t+"']").attr("max",a)}),i(document).on("keyup change",".section_title",function(){var e=i(this).val();i(this).siblings(".wp-travel-accordion-title").html(e)}),i(document).on("keyup change","#wp-travel-price",function(){var e=i(this).val();i("#wp-travel-sale-price").attr("max",e)}),i(document).on("keyup change",".pricing-opt-min-pax",function(){var e=i(this).val();i(this).siblings(".pricing-opt-max-pax").attr("min",e)}),i("#wp-travel-use-global-tabs").is(":checked")?i("#wp-travel-tab-content-tabs .wp-travel-sorting-tabs").css({opacity:"0.3","pointer-events":"none"}):i("#wp-travel-tab-content-tabs .wp-travel-sorting-tabs").css({opacity:"1","pointer-events":"auto"}),i("#wp-travel-use-global-tabs").change(function(){i(this).is(":checked")?i("#wp-travel-tab-content-tabs .wp-travel-sorting-tabs").css({opacity:"0.3","pointer-events":"none"}):i("#wp-travel-tab-content-tabs .wp-travel-sorting-tabs").css({opacity:"1","pointer-events":"auto"})}),i("#wp-travel-use-global-trip-enquiry").is(":checked")?i("#wp-travel-enable-trip-enquiry-option-row").addClass("hidden"):i("#wp-travel-enable-trip-enquiry-option-row").removeClass("hidden"),i("#wp-travel-use-global-trip-enquiry").change(function(){i(this).is(":checked")?i("#wp-travel-enable-trip-enquiry-option-row").addClass("hidden"):i("#wp-travel-enable-trip-enquiry-option-row").removeClass("hidden")}),i(document).on("click","#wp-travel-enable-sale",function(){i("#wp-travel-price").val();i(this).is(":checked")&&i("#wp-travel-sale-price").val()}),i(document).on("change","#wp-travel-sale-price",function(){i(this).val()}),i(document).on("click","#wp-travel-minimum-partial-payout-percent-use-global",function(){s()}),i('input[type="number"]').on("change",function(){var e;"Min PAX"==i(this).attr("placeholder")&&(e=i(this).val(),i(this).siblings('input[type="number').attr("min",e))}),jQuery(".select-main .close").addClass("hidden"),jQuery(document).on("click",".select-main .close",function(){i(this).siblings(".wp-travel-active").removeClass("wp-travel-active"),i(this).siblings(".carret").removeClass("hidden"),i(this).addClass("hidden")}),jQuery(document).on("click",".select-main, .select-main .caret",function(e){0==i(this).find("ul.wp-travel-active").length?(i(this).children("ul").addClass("wp-travel-active"),i(this).children(".close").removeClass("hidden"),i(this).children(".carret").addClass("hidden")):(i(this).children(".carret").removeClass("hidden"),i(this).children(".close").addClass("hidden"),i(this).children("ul").removeClass("wp-travel-active"))}),i(document).on("click",function(e){var t=i(".select-main");t===e.target||t.has(e.target).length||(i("ul.wp-travel-active").removeClass("wp-travel-active"),i(".select-main").children(".carret").removeClass("hidden"),i(".select-main").children(".close").addClass("hidden"))}),jQuery(document).on("change",".select-main li input.multiselect-value",function(e){var t=jQuery(this).closest(".select-main").find("li input.multiselect-value").length;jQuery(this).closest(".select-main").find("li input.multiselect-value:checked").length==t?jQuery(this).closest(".select-main").find(".multiselect-all").prop("checked",!0):jQuery(this).closest(".select-main").find(".multiselect-all").prop("checked",!1),jQuery(this).closest("li").toggleClass("selected")}),jQuery(document).on("change",".multiselect-all",function(e){jQuery(this).is(":checked")?jQuery(this).closest("li").siblings().addClass("selected").find("input.multiselect-value").prop("checked",!0):jQuery(this).closest("li").siblings().removeClass("selected").find("input.multiselect-value").prop("checked",!1)});jQuery(document).on("input click change","input.wp-travel-multi-inner",function(e){jQuery(this).attr("id");var t=jQuery(this).closest(".select-main").find("li.selected").length;jQuery(this).closest(".select-main").find("ul").siblings(".selected-item").html(t+" item selected")}),jQuery(document).on("click",".fact-deleter",function(){jQuery(this).parent().parent().parent().remove()});const p={multiple:function(e,t){val=this.val(),index=this.data("index"),jQuery(".fact-"+index).html((e.options&&Object.entries(e.options)||[]).map(function(e){return jQuery('<label><input type="checkbox" name="wp_travel_trip_facts['+t+'][value][]" value="'+e[0]+'"  >'+e[1]+"</label>")}))},single:function(e,t){val=this.val(),index=this.data("index"),jQuery(".fact-"+index).html(jQuery("<select>").attr("name","wp_travel_trip_facts["+t+"][value]").html((e.options&&Object.entries(e.options)||[]).map(function(e){return jQuery("<option>").attr("value",e[0]).html(e[1])})))},text:function(e,t){val=this.val(),index=this.data("index"),jQuery(".fact-"+index).html(jQuery('<input type="text">').attr("name","wp_travel_trip_facts["+t+"][value]"))},default:function(e,t){val=this.val(),index=this.data("index"),jQuery(".fact-id-"+index).attr("name","wp_travel_trip_facts["+t+"][fact_id]").val(e.id),jQuery(".icon-"+index).attr("name","wp_travel_trip_facts["+t+"][icon]").val(e.icon),jQuery(".type-"+index).attr("name","wp_travel_trip_facts["+t+"][type]").val(e.type)}};jQuery(document).on("change",".fact-type-selecter",function(){var e=Math.random().toString(36).substr(2,9);jQuery(this).attr("name","wp_travel_trip_facts["+e+"][label]");const t=jQuery(this).val();var a=jQuery("#accordion-fact-data").data("factssettings"),n=a.filter(function(e){return t==e.name||e.id&&t==e.id})[0];a.filter(function(e){return t==e.type})[0];n&&(p[n.type].call(jQuery(this),n,e),p.default.call(jQuery(this),n,e))}),0<i(".wp-travel-payment-receipt").length&&i().magnificPopup&&i(".wp-travel-payment-receipt").magnificPopup({type:"image"})}(jQuery);