!function(e){if("undefined"!=typeof GMaps&&e("#gmap").length>0){var t=new GMaps({div:"#gmap",lat:wp_travel_drag_drop_uploader.lat,lng:wp_travel_drag_drop_uploader.lng}),a=document.getElementById("search-input"),n=new google.maps.places.Autocomplete(a);t.setCenter(wp_travel_drag_drop_uploader.lat,wp_travel_drag_drop_uploader.lng),t.setZoom(15),t.addMarker({lat:wp_travel_drag_drop_uploader.lat,lng:wp_travel_drag_drop_uploader.lng,title:wp_travel_drag_drop_uploader.loc,draggable:!0,dragend:function(a){var n=a.latLng.lat(),i=a.latLng.lng();t.setCenter(n,i);var r=new google.maps.LatLng(n,i),l=l=new google.maps.Geocoder;l.geocode({latLng:r},(function(t,a){a==google.maps.GeocoderStatus.OK&&t[1]&&(e("#wp-travel-lat").val(n),e("#wp-travel-lng").val(i),e("#wp-travel-location").val(t[1].formatted_address),e("#search-input").val(t[1].formatted_address))}))}}),n.bindTo("bounds",t),n.addListener("place_changed",(function(){var a=n.getPlace();if(a.geometry){t.removeMarkers(),a.geometry.viewport?t.fitBounds(a.geometry.viewport):(t.setCenter(a.geometry.location),t.setZoom(15));var i=a.geometry.location.lat(),r=a.geometry.location.lng(),l=new google.maps.LatLng(i,r),o=o=new google.maps.Geocoder;o.geocode({latLng:l},(function(t,a){a==google.maps.GeocoderStatus.OK&&t[1]&&(e("#wp-travel-lat").val(i),e("#wp-travel-lng").val(r),e("#wp-travel-location").val(t[1].formatted_address),e("#search-input").val(t[1].formatted_address))})),t.addMarker({lat:i,lng:r,title:a.formatted_address,draggable:!0,dragend:function(a){var n=a.latLng.lat(),i=a.latLng.lng();t.setCenter(n,i);var r=new google.maps.LatLng(n,i),l=l=new google.maps.Geocoder;l.geocode({latLng:r},(function(t,a){a==google.maps.GeocoderStatus.OK&&t[1]&&(e("#wp-travel-lat").val(n),e("#wp-travel-lng").val(i),e("#wp-travel-location").val(t[1].formatted_address),e("#search-input").val(t[1].formatted_address))}))}})}else window.alert("Autocomplete's returned place contains no geometry")}))}function i(){var t="."+e("#wp-travel-pricing-option-type").val()+"-option-row";e(".price-option-row").addClass("hidden"),e(t).removeClass("hidden"),o(),s()}function r(){var t=e("#wp-travel-pricing-option-type").val(),a=e("#wp-travel-fixed-departure");"multiple-price"!==t&&"single-price"!==t||(a.is(":checked")?(e(".wp-travel-fixed-departure-row").removeClass("hidden"),e(".wp-travel-trip-duration-row").addClass("hidden")):(e(".wp-travel-fixed-departure-row").addClass("hidden"),e(".wp-travel-trip-duration-row").removeClass("hidden"))),e(".wp-travel-enable-multiple-dates").addClass("hidden"),"multiple-price"===t&&(a.is(":checked")?(e(".wp-travel-enable-multiple-dates, #wp-variations-multiple-dates").removeClass("hidden"),l()):e(".wp-travel-enable-multiple-dates, #wp-variations-multiple-dates").addClass("hidden"))}function l(){var t=e("#wp-travel-pricing-option-type").val(),a=e("#wp-travel-fixed-departure"),n=e("#wp-travel-enable-multiple-fixed-departure");"multiple-price"===t&&a.is(":checked")&&n.is(":checked")?(e(".wp-travel-fixed-departure-row").addClass("hidden"),e("#wp-variations-multiple-dates").removeClass("hidden")):(e(".wp-travel-fixed-departure-row").removeClass("hidden"),e("#wp-variations-multiple-dates").addClass("hidden"))}function o(){"single-price"==e("#wp-travel-pricing-option-type").val()&&e("#wp-travel-enable-sale").is(":checked")?(e("#wp-travel-sale-price").removeAttr("disabled").closest(".price-option-row").removeClass("hidden"),e("#wp-travel-price").attr("required","required"),e("#wp-travel-sale-price").attr("required","required")):(e("#wp-travel-sale-price").attr("disabled","disabled").closest(".price-option-row").addClass("hidden"),e("#wp-travel-price").removeAttr("required"),e("#wp-travel-sale-price").removeAttr("required"))}function s(){e("#wp-travel-minimum-partial-payout-percent-use-global").is(":checked")?e("#wp-travel-minimum-partial-payout-percent").closest(".price-option-row").addClass("hidden"):e("#wp-travel-minimum-partial-payout-percent").closest(".price-option-row").removeClass("hidden")}function o(){"single-price"==e("#wp-travel-pricing-option-type").val()&&e("#wp-travel-enable-sale").is(":checked")?(e("#wp-travel-sale-price").removeAttr("disabled").closest(".price-option-row").removeClass("hidden"),e("#wp-travel-price").attr("required","required"),e("#wp-travel-sale-price").attr("required","required")):(e("#wp-travel-sale-price").attr("disabled","disabled").closest(".price-option-row").addClass("hidden"),e("#wp-travel-price").removeAttr("required"),e("#wp-travel-sale-price").removeAttr("required"))}function d(){e(".custom-payout-option-row").each((function(){e(this).hasClass("global-enabled")?e(this).removeClass("hidden"):e(this).addClass("hidden")}))}e.fn.tabs&&e(".wp-travel-tabs-wrap").tabs({activate:function(a,n){e(n.newPanel).css({display:"inline-block"}),e("#wp-travel-settings-current-tab").val(e(n.newPanel).attr("id")),"undefined"!=typeof GMaps&&e("#gmap").length>0&&(t.refresh(),google.maps.event.trigger(t.map,"resize"))},create:function(t,a){e(a.panel).css({display:"inline-block"}),e("#wp-travel-settings-current-tab").val(e(a.panel).attr("id"))},load:function(e,t){}}),e.fn.wpt_datepicker&&(e("#wp-travel-start-date").wpt_datepicker({language:"en",minDate:new Date,onSelect:function(t){newMinDate=null,newMaxDate=new Date,""!==t&&(milliseconds=moment(t,"YYYY-MM-DD"),new_date_min=new Date(milliseconds),newMinDate=new Date(new_date_min.setDate(new Date(new_date_min.getDate())))),e("#wp-travel-end-date").wpt_datepicker({minDate:newMinDate})}}),e("#wp-travel-end-date").wpt_datepicker({language:"en",minDate:new Date}),e(".wp-travel-datepicker").wpt_datepicker({language:"en",minDate:new Date}),e(".wp-travel-timepicker").wpt_datepicker({language:"en",timepicker:!0,onlyTimepicker:!0})),e(document).on("click","#publish",(function(){var t=e("#wp-travel-start-date").val(),a=e("#wp-travel-end-date").val(),n="";if(""==t&&""==a||""==t&&(n+="Start date can't be empty!\n"),""!=n)return alert(n),!1;e(document).off("click","#publish")})),e(document).on("click","#wp-travel-enable-sale",(function(){o()})),e(document).on("change","#wp-travel-pricing-option-type",(function(){i(),r(),d()})),e(document).on("click","#wp-travel-fixed-departure",(function(){r()})),e(document).on("change","#wp-travel-enable-multiple-fixed-departure",(function(){l()})),i(),r(),d(),e(document).on("click",".wp-travel-clone-post",(function(t){t.preventDefault();var a=e(this).data("post_id"),n=(e(this).data("security"),{post_id:a,_nonce:_wp_travel_admin._nonce,action:"wp_travel_clone_trip"});e.ajax({url:ajaxurl,data:n,type:"post",dataType:"json",success:function(e){location.href=location.href}})})),e(document).on("change",".wp-travel-variation-pricing-name",(function(){var t=e(this).val().toString().toLowerCase().replace(/\s+/g,"-").replace(/\,+/g,"-").replace(/\"+/g,"-").replace(/\'+/g,"-").replace(/\/+/g,"-").replace(/\(+/g,"-").replace(/\)+/g,"-").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");e(this).siblings(".wp-travel-variation-pricing-uniquekey").val(t)})),e(document).on("change",".wp-travel-pricing-options-list",(function(){var t=e(this).data("category-id");"custom"===e(this).val()?e(".custom-pricing-label-wrap-"+t).css("display","block"):e(".custom-pricing-label-wrap-"+t).css("display","none")})),e(".wp-travel-pricing-options-list").trigger("change"),e(document).on("change",".wp-travel-enable-variation-price-sale",(function(){var t=e(this).closest(".repeat-row").next(".repeat-row");e(this).is(":checked")?(t.removeClass("hidden"),t.find('input[type="number"]').attr("required","required")):(t.addClass("hidden"),t.find('input[type="number"]').removeAttr("required"))})),e(".wp-travel-enable-variation-price-sale").is(":checked")?e(this).closest(".repeat-row").next(".repeat-row").removeClass("hidden"):e(this).closest(".repeat-row").next(".repeat-row").addClass("hidden"),e(document).on("change",".wp-travel-enable-variation-price-sale-new",(function(){var t=e(this).closest(".repeat-row").next(".repeat-row");e(this).is(":checked")?(t.removeClass("visibility-hidden"),t.find('input[type="number"]').attr("required","required")):(t.addClass("visibility-hidden"),t.find('input[type="number"]').removeAttr("required"))})),e(".wp-travel-enable-variation-price-sale-new").is(":checked")?e(this).closest(".repeat-row").next(".repeat-row").removeClass("visibility-hidden"):e(this).closest(".repeat-row").next(".repeat-row").addClass("visibility-hidden"),e("#wp-travel-enable-sale").is(":checked")&&(e("#wp-travel-price").attr("required","required"),e("#wp-travel-sale-price").attr("required","required")),e(document).on("click",".wp-travel-featured-post",(function(t){t.preventDefault();var a=e(this),n={action:"wp_travel_featured_post",post_id:e(this).attr("data-post-id"),nonce:e(this).attr("data-nonce")};e.ajax({url:ajaxurl,data:n,type:"post",dataType:"json",success:function(e){"invalid"!=e&&(a.removeClass("dashicons-star-filled").removeClass("dashicons-star-empty"),"yes"==e.new_status?a.addClass("dashicons-star-filled"):a.addClass("dashicons-star-empty"))}})})),e("#add_itinerary_row").click((function(t){t.preventDefault();var a=wp.template("wp-travel-itinerary-items"),n=Math.floor(990*Math.random())+10;e(".itinerary_block").append(a({random:n})),e(".itinerary_block .panel:last .wp-travel-datepicker").wpt_datepicker({language:"en",minDate:new Date}),e(".itinerary_block .panel:last .wp-travel-timepicker").wpt_datepicker({language:"en",timepicker:!0,onlyTimepicker:!0}),e(".while-empty").addClass("hidden"),e(".wp-collapse-open").removeClass("hidden")})),e(document).on("click",".remove_itinery",(function(t){return t.preventDefault(),e(this).closest(".itinerary_wrap").remove(),!1})),e(".tab-accordion .wp-travel-sorting-tabs, #tab-accordion .wp-travel-sorting-tabs, #tab-accordion-itineraries #accordion-itinerary-data").sortable({handle:".wp-travel-sorting-handle"}),e("#wp-travel-tab-content-setting .wp-travel-sorting-tabs tbody").sortable({handle:".wp-travel-sorting-handle"}),e.ui.accordion.prototype._originalKeyDown=e.ui.accordion.prototype._keydown,e.ui.accordion.prototype._keydown=function(t){var a=e.ui.keyCode;t.keyCode!=a.SPACE&&this._originalKeyDown(t)},e(".ui-accordion-header").click((function(){e(".open-all-link").removeClass("hidden"),e(".close-all-link").removeClass("hidden")})),e(document).on("click",".wt-accordion-close",(function(t){var a=e(this).closest(".tab-accordion").attr("id");1==confirm("Are you sure you want to delete?")&&(e(this).closest("div.panel-default").remove(),e("#"+a+" .panel-default:visible").length>0?(e(".while-empty").addClass("hidden").hide(),e(".wp-collapse-open").removeClass("hidden").show()):(e(".wp-collapse-open").addClass("hidden").hide(),e(".while-empty").removeClass("hidden").show()))})),e(".wp-travel-faq-add-new").on("click",(function(){var t=wp.template("wp-travel-faq"),a=(e("#accordion-faq-data panel-default").length,Math.floor(990*Math.random())+10);e("#accordion-faq-data").append(t({random:a})),e(".while-empty").addClass("hidden"),e(".wp-collapse-open").removeClass("hidden")})),e(".wp-travel-pricing-add-new").on("click",(function(){var t=wp.template("wp-travel-pricing-options"),a=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),n=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);e("#pricing-options-data").append(t({random:a,category_id:n}))})),e(".wp-travel-trip-facts-add-new").on("click",(function(){var t=wp.template("wp-travel-trip-facts-options"),a=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);e("#accordion-fact-data").append(t({random:a}))})),e("#date-options-data .panel .wp-travel-multiple-start-date").each((function(){var t=e(this),a=e(this).val();newMinDate=new Date,""!==a&&(milliseconds=moment(a,"YYYY-MM-DD"),new_date_min=new Date(milliseconds),newMinDate=new Date(new_date_min.setDate(new Date(new_date_min.getDate()))),e(this).siblings(".wp-travel-multiple-end-date").wpt_datepicker({minDate:newMinDate})),e(this).wpt_datepicker({language:"en",minDate:new Date,onSelect:function(e){newMinDate=null,newMaxDate=new Date,""!==e&&(milliseconds=moment(e,"YYYY-MM-DD"),new_date_min=new Date(milliseconds),newMinDate=new Date(new_date_min.setDate(new Date(new_date_min.getDate())))),t.siblings(".wp-travel-multiple-end-date").wpt_datepicker({minDate:newMinDate})}})})),e(".wp-travel-multiple-dates-add-new").on("click",(function(){var t=wp.template("wp-travel-multiple-dates"),a=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);e("#date-options-data").append(t({random:a})),e("#date-options-data .panel:last .wp-travel-multiple-start-date").wpt_datepicker({language:"en",minDate:new Date,onSelect:function(t){newMinDate=null,newMaxDate=new Date,""!==t&&(milliseconds=moment(t,"YYYY-MM-DD"),new_date_min=new Date(milliseconds),newMinDate=new Date(new_date_min.setDate(new Date(new_date_min.getDate())))),e("#date-options-data .panel:last .wp-travel-multiple-end-date").wpt_datepicker({minDate:newMinDate})}})})),e(document).on("change keyup","*[bind]",(function(t){var a=e(this).attr("bind"),n=""!=e(this).val()?e(this).val():"Untitled";e("*[bind='"+a+"']").html(n),e("*[bind='"+a+"']").val(e(this).val())})),e(document).on("change keyup","*[bindPrice]",(function(t){var a=e(this).attr("bindPrice"),n=""!=e(this).val()?e(this).val():1;e("*[bindSale='"+a+"']").attr("max",n)})),e(document).on("keyup change",".section_title",(function(){var t=e(this).val();e(this).siblings(".wp-travel-accordion-title").html(t)})),e(document).on("keyup change","#wp-travel-price",(function(){var t=e(this).val();e("#wp-travel-sale-price").attr("max",t)})),e(document).on("keyup change",".pricing-opt-min-pax",(function(){var t=e(this).val();e(this).siblings(".pricing-opt-max-pax").attr("min",t)})),e("#wp-travel-use-global-tabs").is(":checked")?e("#wp-travel-tab-content-tabs .wp-travel-sorting-tabs").css({opacity:"0.3","pointer-events":"none"}):e("#wp-travel-tab-content-tabs .wp-travel-sorting-tabs").css({opacity:"1","pointer-events":"auto"}),e("#wp-travel-use-global-tabs").change((function(){e(this).is(":checked")?e("#wp-travel-tab-content-tabs .wp-travel-sorting-tabs").css({opacity:"0.3","pointer-events":"none"}):e("#wp-travel-tab-content-tabs .wp-travel-sorting-tabs").css({opacity:"1","pointer-events":"auto"})})),e("#wp-travel-use-global-trip-enquiry").is(":checked")?e("#wp-travel-enable-trip-enquiry-option-row").addClass("hidden"):e("#wp-travel-enable-trip-enquiry-option-row").removeClass("hidden"),e("#wp-travel-use-global-trip-enquiry").change((function(){e(this).is(":checked")?e("#wp-travel-enable-trip-enquiry-option-row").addClass("hidden"):e("#wp-travel-enable-trip-enquiry-option-row").removeClass("hidden")})),e(document).on("click","#wp-travel-enable-sale",(function(){e("#wp-travel-price").val(),e(this).is(":checked")&&e("#wp-travel-sale-price").val()})),e(document).on("change","#wp-travel-sale-price",(function(){e(this).val()})),e(document).on("click","#wp-travel-minimum-partial-payout-percent-use-global",(function(){s()})),e('input[type="number"]').on("change",(function(){if("Min PAX"==e(this).attr("placeholder")){var t=e(this).val();e(this).siblings('input[type="number').attr("min",t)}})),jQuery(".select-main .close").addClass("hidden"),jQuery(document).on("click",".select-main .close",(function(){e(this).siblings(".wp-travel-active").removeClass("wp-travel-active"),e(this).siblings(".carret").removeClass("hidden"),e(this).addClass("hidden")})),jQuery(document).on("click",".select-main, .select-main .caret",(function(t){0==e(this).find("ul.wp-travel-active").length?(e(this).children("ul").addClass("wp-travel-active"),e(this).children(".close").removeClass("hidden"),e(this).children(".carret").addClass("hidden")):(e(this).children(".carret").removeClass("hidden"),e(this).children(".close").addClass("hidden"),e(this).children("ul").removeClass("wp-travel-active"))})),e(document).on("click",(function(t){var a=e(".select-main");a===t.target||a.has(t.target).length||(e("ul.wp-travel-active").removeClass("wp-travel-active"),e(".select-main").children(".carret").removeClass("hidden"),e(".select-main").children(".close").addClass("hidden"))})),jQuery(document).on("change",".select-main li input.multiselect-value",(function(e){var t=jQuery(this).closest(".select-main").find("li input.multiselect-value").length;jQuery(this).closest(".select-main").find("li input.multiselect-value:checked").length==t?jQuery(this).closest(".select-main").find(".multiselect-all").prop("checked",!0):jQuery(this).closest(".select-main").find(".multiselect-all").prop("checked",!1),jQuery(this).closest("li").toggleClass("selected")})),jQuery(document).on("change",".multiselect-all",(function(e){jQuery(this).is(":checked")?jQuery(this).closest("li").siblings().addClass("selected").find("input.multiselect-value").prop("checked",!0):jQuery(this).closest("li").siblings().removeClass("selected").find("input.multiselect-value").prop("checked",!1)})),jQuery(document).on("input click change","input.wp-travel-multi-inner",(function(e){jQuery(this).attr("id");var t=jQuery(this).closest(".select-main").find("li.selected").length;jQuery(this).closest(".select-main").find("ul").siblings(".selected-item").html(t+" item selected")})),jQuery(document).on("click",".fact-deleter",(function(){jQuery(this).parent().parent().parent().remove()}));var p={multiple:function(e,t){val=this.val(),index=this.data("index"),jQuery(".fact-"+index).html((e.options&&Object.entries(e.options)||[]).map((function(e){return jQuery('<label><input type="checkbox" name="wp_travel_trip_facts['+t+'][value][]" value="'+e[0]+'"  >'+e[1]+"</label>")})))},single:function(e,t){val=this.val(),index=this.data("index"),jQuery(".fact-"+index).html(jQuery("<select>").attr("name","wp_travel_trip_facts["+t+"][value]").html((e.options&&Object.entries(e.options)||[]).map((function(e){return jQuery("<option>").attr("value",e[0]).html(e[1])}))))},text:function(e,t){val=this.val(),index=this.data("index"),jQuery(".fact-"+index).html(jQuery('<input type="text">').attr("name","wp_travel_trip_facts["+t+"][value]"))},default:function(e,t){val=this.val(),index=this.data("index"),jQuery(".fact-id-"+index).attr("name","wp_travel_trip_facts["+t+"][fact_id]").val(e.id),jQuery(".icon-"+index).attr("name","wp_travel_trip_facts["+t+"][icon]").val(e.icon),jQuery(".type-"+index).attr("name","wp_travel_trip_facts["+t+"][type]").val(e.type)}};jQuery(document).on("change",".fact-type-selecter",(function(){var e=Math.random().toString(36).substr(2,9);jQuery(this).attr("name","wp_travel_trip_facts["+e+"][label]");var t=jQuery(this).val(),a=jQuery("#accordion-fact-data").data("factssettings"),n=a.filter((function(e){return t==e.name||e.id&&t==e.id}))[0];a.filter((function(e){return t==e.type}))[0],n&&(p[n.type].call(jQuery(this),n,e),p.default.call(jQuery(this),n,e))})),e(".wp-travel-payment-receipt").length>0&&e().magnificPopup&&e(".wp-travel-payment-receipt").magnificPopup({type:"image"})}(jQuery);